<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>ListMap.ts - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <link type="text/css" rel="stylesheet" href="styles/daybrush.css">
    <link type="text/css" rel="stylesheet" href="styles/custom.css">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <meta name="description" content="ListMap.ts - Documentation"/>

</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h2 class="custom"><a href="https://github.com/daybrush/list-map" target="_blank" class="menu-item" id="repository" >Github repo</a></h2><div class="search"><div class="input-area"><input type="text"/></div><button></button></div><ul class="classes"><li file="listmap" class="parent"><a href="ListMap.html">ListMap</a><h4><a href="ListMap.html#methods">Methods</a></h4><ul class='methods'><li data-type='method'><a href="ListMap.html#find">find</a></li><li data-type='method'><a href="ListMap.html#findIndex">findIndex</a></li><li data-type='method'><a href="ListMap.html#forEach">forEach</a></li><li data-type='method'><a href="ListMap.html#get">get</a></li><li data-type='method'><a href="ListMap.html#getIndex">getIndex</a></li><li data-type='method'><a href="ListMap.html#has">has</a></li><li data-type='method'><a href="ListMap.html#keys">keys</a></li><li data-type='method'><a href="ListMap.html#remove">remove</a></li><li data-type='method'><a href="ListMap.html#set">set</a></li><li data-type='method'><a href="ListMap.html#size">size</a></li><li data-type='method'><a href="ListMap.html#splice">splice</a></li><li data-type='method'><a href="ListMap.html#values">values</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">ListMap.ts</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { IObject, find, findIndex } from "@daybrush/utils";

/**
 *
 */
class ListMap&lt;T> {
    private obj: IObject&lt;T> = {};
    private objKeys: Array&lt;number | string> = [];

    /**
     *
     */
    public has(key: string | number): boolean {
        return key in this.obj;
    }
    /**
     *
     */
    public get(key: string | number): T {
        return this.obj[key];
    }
    /**
     *
     */
    public set(key: string | number, value: T): this {
        if (!this.has(key)) {
            this.objKeys.push(key);
        }
        this.setItem(key, value);
        return this;
    }
    /**
     *
     */
    public size(): number {
        return this.objKeys.length;
    }
    /**
     *
     */
    public keys(): Array&lt;number | string> {
        return this.objKeys.slice();
    }
    /**
     *
     */
    public values(): T[] {
        const obj = this.obj;
        const keys = this.objKeys;

        return keys.map(key => obj[key]);
    }
    /**
     *
     */
    public getIndex(key: string | number) {
        return this.objKeys.indexOf(key);
    }
    /**
     *
     */
    public findIndex(
        callback: (value: T, key: number | string, index: number, obj: IObject&lt;T>) => boolean,
    ): number {
        const obj = this.obj;

        return findIndex(this.objKeys, (key, i) => callback(obj[key], key, i, obj));
    }
    /**
     *
     */
    public find(
        callback: (value: T, key: number | string, index: number, obj: IObject&lt;T>) => boolean,
    ): T {
        const obj = this.obj;
        const result = find(this.objKeys, (key, i) => callback(obj[key], key, i, obj));

        return obj[result];
    }
    /**
     *
     */
    public remove(key: string | number): this {
        if (this.has(key)) {
            const index = this.getIndex(key);

            this.removeItem(key);
            this.spliceKeys(index, 1);
        }
        return this;
    }
    /**
     *
     */
    public splice(
        index: number,
        deleteCount: number,
        ...items: Array&lt;[number | string, T]>
    ): Array&lt;[number | string, T]> {
        const added = items.filter(([key, value]) => {
            const hasItem = this.has(key);

            this.setItem(key, value);

            return !hasItem;
        });
        const deletedKeys = this.spliceKeys(index, deleteCount, ...added.map(([key]) => key));

        deletedKeys.forEach(key => {
            this.removeItem(key);
        });

        const obj = this.objKeys;
        return deletedKeys.map(key => [key, obj[key]]);

    }
    /**
     *
     */
    public forEach(callback: (value: T, key: number | string, index: number, obj: IObject&lt;T>) => void): this {
        const obj = this.obj;
        this.objKeys.forEach((key, i) => callback(obj[key], key, i, obj));
        return this;
    }
    private setItem(key: string | number, value: T) {
        this.obj[key] = value;
    }
    private removeItem(key: string | number): void {
        delete this.obj[key];
    }
    private spliceKeys(
        index: number,
        deleteCount: number,
        ...items: Array&lt;number | string>): Array&lt;number | string> {
        return this.objKeys.splice(index, deleteCount, ...items);
    }
}

export default ListMap;
</code></pre>
        </article>
    </section>





<style>


nav li[file="listmap"]:after {
    display: none;
}
nav li[file="listmap"] h4, nav li[file="listmap"] ul {
    display: block;
}
</style>

</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/daybrush/jsdoc">JSDoc 0.3.7</a> on Sun May 26 2019 22:00:02 GMT+0900 (GMT+09:00) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
<script src="scripts/utils.min.js"></script>
<script src="scripts/search.js"></script>
</body>
</html>
