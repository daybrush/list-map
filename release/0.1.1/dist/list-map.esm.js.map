{"version":3,"file":"list-map.esm.js","sources":["../src/ListMap.ts"],"sourcesContent":["import { IObject, find, findIndex } from \"@daybrush/utils\";\n\n/**\n *\n */\nclass ListMap<T> {\n    private obj: IObject<T> = {};\n    private objKeys: Array<number | string> = [];\n\n    /**\n     *\n     */\n    public has(key: string | number): boolean {\n        return key in this.obj;\n    }\n    /**\n     *\n     */\n    public get(key: string | number): T {\n        return this.obj[key];\n    }\n    /**\n     *\n     */\n    public set(key: string | number, value: T): this {\n        if (!this.has(key)) {\n            this.objKeys.push(key);\n        }\n        this.setItem(key, value);\n        return this;\n    }\n    /**\n     *\n     */\n    public size(): number {\n        return this.objKeys.length;\n    }\n    /**\n     *\n     */\n    public keys(): Array<number | string> {\n        return this.objKeys.slice();\n    }\n    /**\n     *\n     */\n    public values(): T[] {\n        const obj = this.obj;\n        const keys = this.objKeys;\n\n        return keys.map(key => obj[key]);\n    }\n    /**\n     *\n     */\n    public getIndex(key: string | number) {\n        return this.objKeys.indexOf(key);\n    }\n    /**\n     *\n     */\n    public findIndex(\n        callback: (value: T, key: number | string, index: number, obj: IObject<T>) => boolean,\n    ): number {\n        const obj = this.obj;\n\n        return findIndex(this.objKeys, (key, i) => callback(obj[key], key, i, obj));\n    }\n    /**\n     *\n     */\n    public find(\n        callback: (value: T, key: number | string, index: number, obj: IObject<T>) => boolean,\n    ): T {\n        const obj = this.obj;\n        const result = find(this.objKeys, (key, i) => callback(obj[key], key, i, obj));\n\n        return obj[result];\n    }\n    /**\n     *\n     */\n    public remove(key: string | number): this {\n        if (this.has(key)) {\n            const index = this.getIndex(key);\n\n            this.removeItem(key);\n            this.spliceKeys(index, 1);\n        }\n        return this;\n    }\n    /**\n     *\n     */\n    public splice(\n        index: number,\n        deleteCount: number,\n        ...items: Array<[number | string, T]>\n    ): Array<[number | string, T]> {\n        const added = items.filter(([key, value]) => {\n            const hasItem = this.has(key);\n\n            this.setItem(key, value);\n\n            return !hasItem;\n        });\n        const deletedKeys = this.spliceKeys(index, deleteCount, ...added.map(([key]) => key));\n\n        deletedKeys.forEach(key => {\n            this.removeItem(key);\n        });\n\n        const obj = this.objKeys;\n        return deletedKeys.map(key => [key, obj[key]]);\n\n    }\n    /**\n     *\n     */\n    public forEach(callback: (value: T, key: number | string, index: number, obj: IObject<T>) => void): this {\n        const obj = this.obj;\n        this.objKeys.forEach((key, i) => callback(obj[key], key, i, obj));\n        return this;\n    }\n    private setItem(key: string | number, value: T) {\n        this.obj[key] = value;\n    }\n    private removeItem(key: string | number): void {\n        delete this.obj[key];\n    }\n    private spliceKeys(\n        index: number,\n        deleteCount: number,\n        ...items: Array<number | string>): Array<number | string> {\n        return this.objKeys.splice(index, deleteCount, ...items);\n    }\n}\n\nexport default ListMap;\n"],"names":["key","obj","value","has","objKeys","push","setItem","length","slice","keys","map","indexOf","callback","findIndex","i","result","find","index","getIndex","removeItem","spliceKeys","deleteCount","_i","items","added","filter","_a","hasItem","_this","deletedKeys","forEach","splice"],"mappings":"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"}