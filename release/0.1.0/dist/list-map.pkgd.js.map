{"version":3,"file":"list-map.pkgd.js","sources":["../src/ListMap.ts"],"sourcesContent":["import { IObject, find, findIndex } from \"@daybrush/utils\";\n\n/**\n *\n */\nclass ListMap<T> {\n    private obj: IObject<T> = {};\n    private objKeys: Array<number | string> = [];\n\n    /**\n     *\n     */\n    public has(key: string | number): boolean {\n        return key in this.obj;\n    }\n    /**\n     *\n     */\n    public get(key: string | number): T {\n        return this.obj[key];\n    }\n    /**\n     *\n     */\n    public set(key: string | number, value: T): this {\n        if (!this.has(key)) {\n            this.objKeys.push(key);\n        }\n        this.setItem(key, value);\n        return this;\n    }\n    /**\n     *\n     */\n    public size(): number {\n        return this.objKeys.length;\n    }\n    /**\n     *\n     */\n    public keys(): Array<number | string> {\n        return this.objKeys.slice();\n    }\n    /**\n     *\n     */\n    public values(): T[] {\n        const obj = this.obj;\n        const keys = this.objKeys;\n\n        return keys.map(key => obj[key]);\n    }\n    /**\n     *\n     */\n    public getIndex(key: string | number) {\n        return this.objKeys.indexOf(key);\n    }\n    /**\n     *\n     */\n    public findIndex(\n        callback: (value: T, key: number | string, index: number, obj: IObject<T>) => boolean,\n    ): number {\n        const obj = this.obj;\n\n        return findIndex(this.objKeys, (key, i) => callback(obj[key], key, i, obj));\n    }\n    /**\n     *\n     */\n    public find(\n        callback: (value: T, key: number | string, index: number, obj: IObject<T>) => boolean,\n    ): T {\n        const obj = this.obj;\n        const result = find(this.objKeys, (key, i) => callback(obj[key], key, i, obj));\n\n        return obj[result];\n    }\n    /**\n     *\n     */\n    public remove(key: string | number): this {\n        if (this.has(key)) {\n            const index = this.getIndex(key);\n\n            this.removeItem(key);\n            this.spliceKeys(index, 1);\n        }\n        return this;\n    }\n    /**\n     *\n     */\n    public splice(\n        index: number,\n        deleteCount: number,\n        ...items: Array<[number | string, T]>\n    ): Array<[number | string, T]> {\n        const added = items.filter(([key, value]) => {\n            const hasItem = this.has(key);\n\n            this.setItem(key, value);\n\n            return !hasItem;\n        });\n        const deletedKeys = this.spliceKeys(index, deleteCount, ...added.map(([key]) => key));\n\n        deletedKeys.forEach(key => {\n            this.removeItem(key);\n        });\n\n        const obj = this.objKeys;\n        return deletedKeys.map(key => [key, obj[key]]);\n\n    }\n    /**\n     *\n     */\n    public forEach(callback: (value: T, key: number | string, index: number, obj: IObject<T>) => void): this {\n        const obj = this.obj;\n        this.objKeys.forEach((key, i) => callback(obj[key], key, i, obj));\n        return this;\n    }\n    private setItem(key: string | number, value: T) {\n        this.obj[key] = value;\n    }\n    private removeItem(key: string | number): void {\n        delete this.obj[key];\n    }\n    private spliceKeys(\n        index: number,\n        deleteCount: number,\n        ...items: Array<number | string>): Array<number | string> {\n        return this.objKeys.splice(index, deleteCount, ...items);\n    }\n}\n\nexport default ListMap;\n"],"names":["key","obj","value","has","objKeys","push","setItem","length","slice","keys","map","indexOf","callback","findIndex","i","result","find","index","getIndex","removeItem","spliceKeys","deleteCount","_i","items","added","filter","_a","hasItem","_this","deletedKeys","forEach","splice"],"mappings":"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"}