{"version":3,"file":"list-map.pkgd.min.js","sources":["../src/ListMap.ts"],"sourcesContent":["import { IObject, find, findIndex } from \"@daybrush/utils\";\n\n/**\n *\n */\nclass ListMap<T> {\n    private obj: IObject<T> = {};\n    private objKeys: Array<number | string> = [];\n\n    /**\n     *\n     */\n    public has(key: string | number): boolean {\n        return key in this.obj;\n    }\n    /**\n     *\n     */\n    public get(key: string | number): T {\n        return this.obj[key];\n    }\n    /**\n     *\n     */\n    public set(key: string | number, value: T): this {\n        if (!this.has(key)) {\n            this.objKeys.push(key);\n        }\n        this.setItem(key, value);\n        return this;\n    }\n    /**\n     *\n     */\n    public size(): number {\n        return this.objKeys.length;\n    }\n    /**\n     *\n     */\n    public keys(): Array<number | string> {\n        return this.objKeys.slice();\n    }\n    /**\n     *\n     */\n    public values(): T[] {\n        const obj = this.obj;\n        const keys = this.objKeys;\n\n        return keys.map(key => obj[key]);\n    }\n    /**\n     *\n     */\n    public getIndex(key: string | number) {\n        return this.objKeys.indexOf(key);\n    }\n    /**\n     *\n     */\n    public findIndex(\n        callback: (value: T, key: number | string, index: number, obj: IObject<T>) => boolean,\n    ): number {\n        const obj = this.obj;\n\n        return findIndex(this.objKeys, (key, i) => callback(obj[key], key, i, obj));\n    }\n    /**\n     *\n     */\n    public find(\n        callback: (value: T, key: number | string, index: number, obj: IObject<T>) => boolean,\n    ): T {\n        const obj = this.obj;\n        const result = find(this.objKeys, (key, i) => callback(obj[key], key, i, obj));\n\n        return obj[result];\n    }\n    /**\n     *\n     */\n    public remove(key: string | number): this {\n        if (this.has(key)) {\n            const index = this.getIndex(key);\n\n            this.removeItem(key);\n            this.spliceKeys(index, 1);\n        }\n        return this;\n    }\n    /**\n     *\n     */\n    public splice(\n        index: number,\n        deleteCount: number,\n        ...items: Array<[number | string, T]>\n    ): Array<[number | string, T]> {\n        const added = items.filter(([key, value]) => {\n            const hasItem = this.has(key);\n\n            this.setItem(key, value);\n\n            return !hasItem;\n        });\n        const deletedKeys = this.spliceKeys(index, deleteCount, ...added.map(([key]) => key));\n\n        deletedKeys.forEach(key => {\n            this.removeItem(key);\n        });\n\n        const obj = this.objKeys;\n        return deletedKeys.map(key => [key, obj[key]]);\n\n    }\n    /**\n     *\n     */\n    public forEach(callback: (value: T, key: number | string, index: number, obj: IObject<T>) => void): this {\n        const obj = this.obj;\n        this.objKeys.forEach((key, i) => callback(obj[key], key, i, obj));\n        return this;\n    }\n    private setItem(key: string | number, value: T) {\n        this.obj[key] = value;\n    }\n    private removeItem(key: string | number): void {\n        delete this.obj[key];\n    }\n    private spliceKeys(\n        index: number,\n        deleteCount: number,\n        ...items: Array<number | string>): Array<number | string> {\n        return this.objKeys.splice(index, deleteCount, ...items);\n    }\n}\n\nexport default ListMap;\n"],"names":["key","this","obj","value","has","objKeys","push","setItem","length","slice","map","indexOf","callback","findIndex","i","result","find","index","getIndex","removeItem","spliceKeys","deleteCount","_i","items","added","filter","_a","hasItem","_this","deletedKeys","forEach","splice"],"mappings":";;;;;;;;0UAM8B,gBACgB,kCAK1C,SAAWA,UACAA,KAAOC,KAAKC,WAKvB,SAAWF,UACAC,KAAKC,IAAIF,UAKpB,SAAWA,EAAsBG,UACxBF,KAAKG,IAAIJ,SACLK,QAAQC,KAAKN,QAEjBO,QAAQP,EAAKG,GACXF,aAKX,kBACWA,KAAKI,QAAQG,eAKxB,kBACWP,KAAKI,QAAQI,kBAKxB,eACUP,EAAMD,KAAKC,WACJD,KAAKI,QAENK,IAAI,SAAAV,UAAOE,EAAIF,iBAK/B,SAAgBA,UACLC,KAAKI,QAAQM,QAAQX,gBAKhC,SACIY,OAEMV,EAAMD,KAAKC,WAEVW,EAAUZ,KAAKI,QAAS,SAACL,EAAKc,UAAMF,EAASV,EAAIF,GAAMA,EAAKc,EAAGZ,aAK1E,SACIU,OAEMV,EAAMD,KAAKC,IACXa,iDAASC,CAAKf,KAAKI,QAAS,SAACL,EAAKc,UAAMF,EAASV,EAAIF,GAAMA,EAAKc,EAAGZ,YAElEA,EAAIa,aAKf,SAAcf,MACNC,KAAKG,IAAIJ,GAAM,KACTiB,EAAQhB,KAAKiB,SAASlB,QAEvBmB,WAAWnB,QACXoB,WAAWH,EAAO,UAEpBhB,eAKX,SACIgB,EACAI,2BACAC,mBAAAA,IAAAC,wBAEMC,EAAQD,EAAME,OAAO,SAACC,OAAC1B,OAAKG,OACxBwB,EAAUC,EAAKxB,IAAIJ,UAEzB4B,EAAKrB,QAAQP,EAAKG,IAEVwB,IAENE,EAAc5B,KAAKmB,iBAALnB,MAAgBgB,EAAOI,UAAgBG,EAAMd,IAAI,SAACgB,mBAEtEG,EAAYC,QAAQ,SAAA9B,GAChB4B,EAAKT,WAAWnB,SAGdE,EAAMD,KAAKI,eACVwB,EAAYnB,IAAI,SAAAV,SAAO,CAACA,EAAKE,EAAIF,iBAM5C,SAAeY,OACLV,EAAMD,KAAKC,gBACZG,QAAQyB,QAAQ,SAAC9B,EAAKc,UAAMF,EAASV,EAAIF,GAAMA,EAAKc,EAAGZ,KACrDD,gBAEX,SAAgBD,EAAsBG,QAC7BD,IAAIF,GAAOG,gBAEpB,SAAmBH,UACRC,KAAKC,IAAIF,iBAEpB,SACIiB,EACAI,sBACAC,mBAAAA,IAAAC,2BACOG,EAAAzB,KAAKI,SAAQ0B,gBAAOd,EAAOI,UAAgBE"}