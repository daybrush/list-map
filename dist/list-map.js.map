{"version":3,"file":"list-map.js","sources":["../src/ListMap.ts"],"sourcesContent":["import { IObject, find, findIndex } from \"@daybrush/utils\";\n\n/**\n *\n */\nclass ListMap<T> {\n    private obj: IObject<T> = {};\n    private objKeys: Array<number | string> = [];\n\n    /**\n     *\n     */\n    public has(key: string | number): boolean {\n        return key in this.obj;\n    }\n    /**\n     *\n     */\n    public get(key: string | number): T {\n        return this.obj[key];\n    }\n    /**\n     *\n     */\n    public set(key: string | number, value: T): this {\n        if (!this.has(key)) {\n            this.objKeys.push(key);\n        }\n        this.setItem(key, value);\n        return this;\n    }\n    /**\n     *\n     */\n    public size(): number {\n        return this.objKeys.length;\n    }\n    /**\n     *\n     */\n    public keys(): Array<number | string> {\n        return this.objKeys.slice();\n    }\n    /**\n     *\n     */\n    public values(): T[] {\n        const obj = this.obj;\n        const keys = this.objKeys;\n\n        return keys.map(key => obj[key]);\n    }\n    /**\n     *\n     */\n    public getIndex(key: string | number) {\n        return this.objKeys.indexOf(key);\n    }\n    /**\n     *\n     */\n    public findIndex(\n        callback: (value: T, key: number | string, index: number, obj: IObject<T>) => boolean,\n    ): number {\n        const obj = this.obj;\n\n        return findIndex(this.objKeys, (key, i) => callback(obj[key], key, i, obj));\n    }\n    /**\n     *\n     */\n    public find(\n        callback: (value: T, key: number | string, index: number, obj: IObject<T>) => boolean,\n    ): T {\n        const obj = this.obj;\n        const result = find(this.objKeys, (key, i) => callback(obj[key], key, i, obj));\n\n        return obj[result];\n    }\n    /**\n     *\n     */\n    public remove(key: string | number): this {\n        if (this.has(key)) {\n            const index = this.getIndex(key);\n\n            this.removeItem(key);\n            this.spliceKeys(index, 1);\n        }\n        return this;\n    }\n    /**\n     *\n     */\n    public splice(\n        index: number,\n        deleteCount: number,\n        ...items: Array<[number | string, T]>\n    ): Array<[number | string, T]> {\n        const added = items.filter(([key, value]) => {\n            const hasItem = this.has(key);\n\n            this.setItem(key, value);\n\n            return !hasItem;\n        });\n        const deletedKeys = this.spliceKeys(index, deleteCount, ...added.map(([key]) => key));\n\n        deletedKeys.forEach(key => {\n            this.removeItem(key);\n        });\n\n        const obj = this.objKeys;\n        return deletedKeys.map(key => [key, obj[key]]);\n\n    }\n    /**\n     *\n     */\n    public forEach(callback: (value: T, key: number | string, index: number, obj: IObject<T>) => void): this {\n        const obj = this.obj;\n        this.objKeys.forEach((key, i) => callback(obj[key], key, i, obj));\n        return this;\n    }\n    private setItem(key: string | number, value: T) {\n        this.obj[key] = value;\n    }\n    private removeItem(key: string | number): void {\n        delete this.obj[key];\n    }\n    private spliceKeys(\n        index: number,\n        deleteCount: number,\n        ...items: Array<number | string>): Array<number | string> {\n        return this.objKeys.splice(index, deleteCount, ...items);\n    }\n}\n\nexport default ListMap;\n"],"names":["key","obj","value","has","objKeys","push","setItem","length","slice","keys","map","indexOf","callback","findIndex","i","result","find","index","getIndex","removeItem","spliceKeys","deleteCount","_i","items","added","filter","_a","hasItem","_this","deletedKeys","forEach","splice"],"mappings":"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"}